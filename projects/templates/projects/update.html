{% extends "projects/layout.html" %}
{% load static %}

{% block main %}
<div class="container mt-3">
    <form action="{% url 'projects:update' project.id %}" method="post" enctype="multipart/form-data">
        {% csrf_token %}

        <div class="mb-3">
            <label for="{{ form.title.id_for_label }}" class="form-label">Project Title</label>
            {{ form.title }}
            {% if form.title.errors %}
                <div class="invalid-feedback d-block">{{ form.title.errors }}</div>
            {% endif %}
        </div>

        <div class="mb-3">
            <label for="{{ form.overview.id_for_label }}" class="form-label">Overview</label>
            {{ form.overview }}
            {% if form.overview.errors %}
                <div class="invalid-feedback d-block">{{ form.overview.errors }}</div>
            {% endif %}
        </div>

        <div class="mb-3">
            <label for="{{ form.description.id_for_label }}" class="form-label">Description</label>
            {{ form.description }}
            {% if form.description.errors %}
                <div class="invalid-feedback d-block">{{ form.description.errors }}</div>
            {% endif %}
        </div>

        <div class="mb-3">
            <label for="{{ form.objectives.id_for_label }}" class="form-label">Objectives</label>
            {{ form.objectives }}
            {% if form.objectives.errors %}
                <div class="invalid-feedback d-block">{{ form.objectives.errors }}</div>
            {% endif %}
        </div>

        <div class="mb-3">
            <label for="{{ form.key_learning.id_for_label }}" class="form-label">Key Learnings</label>
            {{ form.key_learning }}
            {% if form.key_learning.errors %}
                <div class="invalid-feedback d-block">{{ form.key_learning.errors }}</div>
            {% endif %}
        </div>

        <div class="mb-3">
            <label for="{{ form.technologies.id_for_label }}" class="form-label">Technologies (Comma separated)</label>
            {{ form.technologies }}
            {% if form.technologies.errors %}
                <div class="invalid-feedback d-block">{{ form.technologies.errors }}</div>
            {% endif %}
        </div>

        <div class="mb-3">
            <label for="{{ form.video_url.id_for_label }}" class="form-label">Video URL (Optional)</label>
            {{ form.video_url }}
            {% if form.video_url.errors %}
                <div class="invalid-feedback d-block">{{ form.video_url.errors }}</div>
            {% endif %}
        </div>

        <div class="mb-3">
            <label for="{{ form.github_url.id_for_label }}" class="form-label">GitHub Repository URL (Optional)</label>
            {{ form.github_url }}
            {% if form.github_url.errors %}
                <div class="invalid-feedback d-block">{{ form.github_url.errors }}</div>
            {% endif %}
        </div>

        <div class="mb-3">
            <label class="form-label fw-semibold">Project Image</label>
            {% if project.image %}
                <div class="mb-2">
                    <img src="{{ project.image.url }}" class="img-thumbnail" style="max-height: 150px;"
                        alt="Current project image">
                </div>
            {% endif %}

            <div class="input-group">
                <input type="file" name="image" class="form-control" id="id_image" accept="image/*">
                {% if project.image %}
                    <div class="form-check ms-3 mt-1">
                        <input type="checkbox" name="image-clear" id="image-clear_id" class="form-check-input">
                        <label class="form-check-label" for="image-clear_id">Remove current image</label>
                    </div>
                {% endif %}
            </div>

            {% if form.image.errors %}
                <div class="invalid-feedback d-block">{{ form.image.errors }}</div>
            {% endif %}
        </div>

        <div class="mb-3">
            <label for="{{ form.is_public.id_for_label }}" class="form-label">Project Visibility</label>
            {{ form.is_public }}
            {% if form.is_public.errors %}
                <div class="invalid-feedback d-block">{{ form.is_public.errors }}</div>
            {% endif %}
        </div>

        <div class="d-grid gap-2 col-6 mx-auto mb-3">
            <button type="submit" class="btn btn-primary">Update Project</button>
        </div>
    </form>
</div>
{% endblock %}